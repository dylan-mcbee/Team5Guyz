<style>
/* The Modal (background) */
.tmodal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    
    
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content */
.tmodal-content {
    background-color: black;
    margin: auto;
    /*padding: 20px; */
    width: 90%;
    height: 100%;
}

/* The Close Button */
.close {
    color: white;
    float: right;
    font-size: 28px;
    font-weight: bold;
}

.close:hover,
.close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
}
</style>

<div class="container">
	<div class="row">
		<div class="col-sm-3">
			<img class="movieImg" alt="" ng-src="{{ info.poster }}" width=200;
				height=300;> <a
				class="waves-effect waves-light btn btn-warning pulse"
				style="margin: 0 auto; width: 200px" href="#ticket">Buy ticket</a>
			<!-- Modal Structure -->
			<div id="ticket" class="modal modal-fixed-footer"
				style="background-color: black; height: 500px; width: 900px">
				<div class="modal-content">
					<div class="tab-content">
						<div class="tab-pane active" id="Login">
							<h4>{{ info.title }} Tickets</h4>
							<form role="form" class="form-horizontal">
								<div class="form-group">
									<label for="email" class="col-sm-2 control-label">
										Credit Card</label>
									<div class="col-sm-10">
										<input type="number" class="form-control" id="email1"
											placeholder="Credit Card" />
									</div>
								</div>
								<div class="form-group">
									<label for="exampleInputPassword1"
										class="col-sm-2 control-label"> Expiration Date</label>
									<div class="col-sm-10">
										<input type="date" class="form-control"
											id="tickNum" placeholder="Ticket Total" />
										<input type="password" class="form-control"
											id="tickNum" placeholder="CVV" />
									</div>
								</div>
								<div class="form-group">
									<label for="exampleInputPassword1"
										class="col-sm-2 control-label"> Ticket Total</label>
									<div class="col-sm-10">
										<input type="number" class="form-control"
											id="tickNum" placeholder="Ticket Total" />
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="submit" class="btn btn-primary btn-sm">
											Submit</button>
				</div>
			</div>
		</div>
		<div class="col-sm-3">
			<h5 class="movieTitle" style="color: white">{{ info.title }}</h5>
			<p class="releaseDate" style="color: white">Release: {{
				info.release_date }}</p>
			<p class="runtime" style="color: white">Runtime: {{ info.runtime
				}} Min.</p>
			<p class="genre" style="color: white">Genre: {{ info.genre }}</p>
			<p class="rating" style="color: white">Rating: {{ info.rating }}
				/ 10</p>
			<p class="ratingCount" style="color: white">Vote#: {{
				info.vote_count }}</p>
		</div>
		<div class="col-sm-6">
			<p class="overview" style="color: white">{{ info.overview }}</p>
			<!-- Modal Trigger -->
			<!-- <a class="waves-effect waves-light btn" href="#modal2">View
				Trailer</a> -->
			
			<a id="myBtn" class="waves-effect waves-light btn" href="#modal2">View
				Trailer</a>
			<!-- <button id="myBtn">View Trailer</button> -->
			<div id="modal2" class="tmodal">

			  <!-- Modal content -->
			  <div class="tmodal-content">
			  <span class="close">&times;</span>
			    <iframe class="movieTrailer" allowfullscreen="allowfullscreen"
						width="100%" height="100%"
						ng-src="{{ info.trailer | trusted }}"> 
				</iframe>
			  </div>
			
			<!-- ng-src="{{ info.trailer + '?loop=1' | trusted }}"> -->
			
			</div>
			<!-- Modal Structure -->
			<!-- <div id="modal2" class="modal modal-fixed-footer"
				style="background-color: black; height: 500px; width: 900px">
				<div class="modal-content video-container"
					style="background-color: black;">
					<iframe class="movieTrailer" allowfullscreen="allowfullscreen"
						width="100%" height="100%"
						ng-src="{{ info.trailer + '?loop=1' | trusted }}"> </iframe>
				</div>
				<div class="modal-footer" style="background-color: grey;">
					<a href="#!"
						class="modal-action modal-close waves-effect waves-green btn-flat "
						style="color: white">Close</a>
				</div>
			</div> -->
			<script type="text/javascript">
			$(document).ready(function(){
			    // the "href" attribute of the modal trigger must specify the modal ID that wants to be triggered
			    $('#ticket').modal();
			   // $('#modal2').modal();
			    
			 	// Get the modal
			   // var modal = document.getElementById('myModal');
			 	var modal = document.getElementById('modal2');

			    // Get the button that opens the modal
			    var btn = document.getElementById("myBtn");

			    // Get the <span> element that closes the modal
			    var span = document.getElementsByClassName("close")[0];

			    // When the user clicks the button, open the modal 
			    btn.onclick = function() {
			    	//$('.movieTrailer').attr('src', 'https://www.youtube.com/embed/IjHgzkQM2Sg?autoplay=1&controls=0');
			    	var source = $('.movieTrailer').attr('src');
			    	console.log("Source: " + source);
			    	if (!source.includes('autoplay')) {
			    		var fullSource = source.concat("?autoplay=1");
				    	console.log("FullSource: " + fullSource);
				    	$('.movieTrailer').attr('src', fullSource);
			    	}
			    	else {
			    		$('.movieTrailer').attr('src', source);
			    	}
			        modal.style.display = "block";
			    }

			    // When the user clicks on <span> (x), close the modal
			    span.onclick = function() {
			    	$('.movieTrailer').attr('src', '');
			        modal.style.display = "none";
			    }

			    // When the user clicks anywhere outside of the modal, close it
			    window.onclick = function(event) {
			        if (event.target == modal) {
			            modal.style.display = "none";
			        }
			    }
			  });
			</script>
		</div>
	</div>
</div>